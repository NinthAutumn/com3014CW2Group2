import{S as be,i as ge,s as ye,T as we,U as Ee,e as c,t as L,c as f,a as w,h as P,d as m,b as s,g as ae,G as t,w as ke,k as g,x as Te,m as y,f as N,y as Ue,Q as D,J as F,j as Ie,q as Ae,o as Le,B as Pe,R as je,F as De}from"../../chunks/vendor-9f39b42c.js";import{h as pe,g as he}from"../../chunks/http-7001acd5.js";import"../../chunks/singletons-d1fb5791.js";function _e(i){let a,l;return{c(){a=c("div"),l=L("This Username is Already Taken!"),this.h()},l(r){a=f(r,"DIV",{class:!0});var o=w(a);l=P(o,"This Username is Already Taken!"),o.forEach(m),this.h()},h(){s(a,"class","error")},m(r,o){ae(r,a,o),t(a,l)},d(r){r&&m(a)}}}function ve(i){let a,l;return{c(){a=c("div"),l=L("This Email is Already Taken!"),this.h()},l(r){a=f(r,"DIV",{class:!0});var o=w(a);l=P(o,"This Email is Already Taken!"),o.forEach(m),this.h()},h(){s(a,"class","error")},m(r,o){ae(r,a,o),t(a,l)},d(r){r&&m(a)}}}function Re(i){let a,l,r,o,B,e,U,H,O,I,S,G,h,J,V,A,_,E,k,W,Q,R,X,Y,v,Z,q,$,x,b,ee,C,z,te,j,re,M,se,le;o=new we({props:{icon:Ee}});let d=i[2]&&_e(),p=i[3]&&ve();return{c(){a=c("div"),l=c("div"),r=c("div"),ke(o.$$.fragment),B=g(),e=c("form"),U=c("h1"),H=L("Register"),O=g(),I=c("label"),S=L("Username"),G=g(),h=c("input"),J=g(),d&&d.c(),V=g(),A=c("label"),_=L("Email"),E=g(),k=c("input"),W=g(),p&&p.c(),Q=g(),R=c("label"),X=L("Password"),Y=g(),v=c("input"),Z=g(),q=c("label"),$=L("Confirm Password"),x=g(),b=c("input"),ee=g(),C=c("div"),z=L(i[1]),te=g(),j=c("button"),re=L("Register"),this.h()},l(u){a=f(u,"DIV",{class:!0});var T=w(a);l=f(T,"DIV",{class:!0});var K=w(l);r=f(K,"DIV",{class:!0,style:!0});var ne=w(r);Te(o.$$.fragment,ne),ne.forEach(m),B=y(K),e=f(K,"FORM",{class:!0});var n=w(e);U=f(n,"H1",{class:!0});var ie=w(U);H=P(ie,"Register"),ie.forEach(m),O=y(n),I=f(n,"LABEL",{for:!0,class:!0});var oe=w(I);S=P(oe,"Username"),oe.forEach(m),G=y(n),h=f(n,"INPUT",{placeholder:!0,type:!0,class:!0,style:!0}),J=y(n),d&&d.l(n),V=y(n),A=f(n,"LABEL",{for:!0,class:!0});var ue=w(A);_=P(ue,"Email"),ue.forEach(m),E=y(n),k=f(n,"INPUT",{placeholder:!0,type:!0,class:!0,style:!0}),W=y(n),p&&p.l(n),Q=y(n),R=f(n,"LABEL",{for:!0,class:!0});var ce=w(R);X=P(ce,"Password"),ce.forEach(m),Y=y(n),v=f(n,"INPUT",{type:!0,placeholder:!0,class:!0,style:!0,minlength:!0}),Z=y(n),q=f(n,"LABEL",{for:!0,class:!0});var fe=w(q);$=P(fe,"Confirm Password"),fe.forEach(m),x=y(n),b=f(n,"INPUT",{type:!0,placeholder:!0,class:!0,style:!0,minlength:!0}),ee=y(n),C=f(n,"DIV",{class:!0});var me=w(C);z=P(me,i[1]),me.forEach(m),te=y(n),j=f(n,"BUTTON",{type:!0,style:!0,class:!0});var de=w(j);re=P(de,"Register"),de.forEach(m),n.forEach(m),K.forEach(m),T.forEach(m),this.h()},h(){s(r,"class","button button--close"),N(r,"margin-bottom","1rem"),s(U,"class","svelte-1evv4cj"),s(I,"for","username"),s(I,"class","svelte-1evv4cj"),s(h,"placeholder","Username"),s(h,"type","text"),s(h,"class","input input--normal input--white"),N(h,"margin-bottom","2rem"),h.required=!0,s(A,"for","username"),s(A,"class","svelte-1evv4cj"),s(k,"placeholder","Email"),s(k,"type","text"),s(k,"class","input input--normal input--white"),k.required=!0,N(k,"margin-bottom","2rem"),s(R,"for","username"),s(R,"class","svelte-1evv4cj"),s(v,"type","password"),s(v,"placeholder","*********"),s(v,"class","input input--normal input--white"),v.required=!0,N(v,"margin-bottom","2rem"),s(v,"minlength","6"),s(q,"for","username"),s(q,"class","svelte-1evv4cj"),s(b,"type","password"),s(b,"placeholder","*********"),s(b,"class","input input--normal input--white"),N(b,"margin-bottom","2rem"),b.required=!0,s(b,"minlength","6"),s(C,"class","error error--center"),s(j,"type","submit"),N(j,"width","100%"),s(j,"class","button button--normal button--secondary button--very-round"),s(e,"class","register-page__card svelte-1evv4cj"),s(l,"class","register-page__container container"),s(a,"class","register-page page svelte-1evv4cj")},m(u,T){ae(u,a,T),t(a,l),t(l,r),Ue(o,r,null),t(l,B),t(l,e),t(e,U),t(U,H),t(e,O),t(e,I),t(I,S),t(e,G),t(e,h),D(h,i[0].username),t(e,J),d&&d.m(e,null),t(e,V),t(e,A),t(A,_),t(e,E),t(e,k),D(k,i[0].email),t(e,W),p&&p.m(e,null),t(e,Q),t(e,R),t(R,X),t(e,Y),t(e,v),D(v,i[0].password),t(e,Z),t(e,q),t(q,$),t(e,x),t(e,b),D(b,i[0].confirm_password),t(e,ee),t(e,C),t(C,z),t(e,te),t(e,j),t(j,re),M=!0,se||(le=[F(r,"click",i[6]),F(h,"input",i[7]),F(k,"input",i[8]),F(v,"input",i[9]),F(b,"input",i[10]),F(e,"submit",i[4])],se=!0)},p(u,[T]){T&1&&h.value!==u[0].username&&D(h,u[0].username),u[2]?d||(d=_e(),d.c(),d.m(e,V)):d&&(d.d(1),d=null),T&1&&k.value!==u[0].email&&D(k,u[0].email),u[3]?p||(p=ve(),p.c(),p.m(e,Q)):p&&(p.d(1),p=null),T&1&&v.value!==u[0].password&&D(v,u[0].password),T&1&&b.value!==u[0].confirm_password&&D(b,u[0].confirm_password),(!M||T&2)&&Ie(z,u[1])},i(u){M||(Ae(o.$$.fragment,u),M=!0)},o(u){Le(o.$$.fragment,u),M=!1},d(u){u&&m(a),Pe(o),d&&d.d(),p&&p.d(),se=!1,je(le)}}}const Ne=async({session:i,url:a,fetch:l})=>({});function qe(i,a,l){let r={email:"",password:"",confirm_password:"",username:""},o="",B=!1,e=!1,{verified:U=""}=a;const H=De("auth");async function O(_){if(!_)return;const{taken:E}=await pe(fetch)(`/users/user/email/${_}/taken`);l(3,e=E)}async function I(_){if(!_)return;const{taken:E}=await pe(fetch)(`/users/user/username/${_}/taken`);l(2,B=E)}async function S(_){if(_.preventDefault(),r.confirm_password!=r.password)return l(1,o="Confirm Password is different from your password.");let E=await H.registerUser(r);if(E!=null&&E.error){l(1,o=E.error);return}he("/")}const G=()=>he("/auth/login");function h(){r.username=this.value,l(0,r)}function J(){r.email=this.value,l(0,r)}function V(){r.password=this.value,l(0,r)}function A(){r.confirm_password=this.value,l(0,r)}return i.$$set=_=>{"verified"in _&&l(5,U=_.verified)},i.$$.update=()=>{i.$$.dirty&1&&O(r.email),i.$$.dirty&1&&I(r.username)},[r,o,B,e,S,U,G,h,J,V,A]}class Fe extends be{constructor(a){super();ge(this,a,qe,Re,ye,{verified:5})}}export{Fe as default,Ne as load};
