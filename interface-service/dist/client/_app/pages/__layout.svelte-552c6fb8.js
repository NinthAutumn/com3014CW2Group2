var P=Object.defineProperty,T=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var S=(s,e,t)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,V=(s,e)=>{for(var t in e||(e={}))F.call(e,t)&&S(s,t,e[t]);if(E)for(var t of E(e))J.call(e,t)&&S(s,t,e[t]);return s},A=(s,e)=>T(s,B(e));import{F as G,S as H,i as O,s as U,e as _,c as h,a as v,d as l,b as c,g as b,G as p,H as m,I as x,J as K,K as L,L as j,k as z,w as Q,m as R,x as W,y as X,M as Y,N as Z,O as ee,q as M,o as N,B as te,r as se}from"../chunks/vendor-9f39b42c.js";import{g as ae,h as C}from"../chunks/http-7001acd5.js";import"../chunks/singletons-d1fb5791.js";const re=()=>{const s=G("__svelte__");return{page:{subscribe:s.page.subscribe},navigating:{subscribe:s.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:s.navigating.subscribe}},session:s.session,updated:s.updated}},q=s=>{throw new Error(`Cannot ${s} session store before subscribing`)},$={subscribe(s){const e=re().session;return $.set=e.set,$.update=e.update,e.subscribe(s)},set:()=>q("set"),update:()=>q("update")};function ne(s){let e,t,a,n;return{c(){e=_("img"),this.h()},l(i){e=h(i,"IMG",{src:!0,height:!0,width:!0,alt:!0}),this.h()},h(){x(e.src,t="/icon-user.svg")||c(e,"src",t),c(e,"height","20"),c(e,"width","20"),c(e,"alt","")},m(i,r){b(i,e,r),a||(n=K(e,"click",s[1]),a=!0)},p:m,d(i){i&&l(e),a=!1,n()}}}function ie(s){let e,t;return{c(){e=_("img"),this.h()},l(a){e=h(a,"IMG",{src:!0,height:!0,width:!0,alt:!0}),this.h()},h(){x(e.src,t="/avatar.svg")||c(e,"src",t),c(e,"height","20"),c(e,"width","20"),c(e,"alt","")},m(a,n){b(a,e,n)},p:m,d(a){a&&l(e)}}}function oe(s){let e,t,a,n,i,r;function o(d,f){return d[0].authenticated?ie:ne}let g=o(s)(s);return{c(){e=_("nav"),t=_("div"),a=_("div"),n=_("div"),i=_("div"),r=_("div"),g.c(),this.h()},l(d){e=h(d,"NAV",{class:!0});var f=v(e);t=h(f,"DIV",{class:!0});var y=v(t);a=h(y,"DIV",{class:!0});var w=v(a);n=h(w,"DIV",{class:!0});var k=v(n);i=h(k,"DIV",{class:!0});var D=v(i);r=h(D,"DIV",{class:!0});var I=v(r);g.l(I),I.forEach(l),D.forEach(l),k.forEach(l),w.forEach(l),y.forEach(l),f.forEach(l),this.h()},h(){c(r,"class","header-nav__avatar svelte-1dp675s"),c(i,"class","header-nav__action"),c(n,"class","header-nav__actions svelte-1dp675s"),c(a,"class","header-nav__container svelte-1dp675s"),c(t,"class","container"),c(e,"class","header-nav page svelte-1dp675s")},m(d,f){b(d,e,f),p(e,t),p(t,a),p(a,n),p(n,i),p(i,r),g.m(r,null)},p(d,[f]){g.p(d,f)},i:m,o:m,d(d){d&&l(e),g.d()}}}function ce(s){var a;return[(a=G("auth"))==null?void 0:a.state,()=>{ae("/auth/login")}]}class le extends H{constructor(e){super();O(this,e,ce,oe,U,{})}}class ue{constructor(e){this.state={authenticated:!1,user:{},token:{},isMobile:!1},e.authenticated,this.state=e}logoutUser(){}async loginUser(e){const t=await C(fetch)("/auth/login","POST",e);return t.error?{error:t.error}:this.setAuth(t)}async setAuth({user:e,token:t}){await this.state.update(a=>A(V({},a),{user:e,authenticated:!0,token:t})),console.log("updated"),L.set("access_token",t,{expires:new Date(new Date().setDate(new Date().getDate()+7))})}async registerUser(e){const t=await C(fetch)("/auth/register","POST",e);if(t.error)return{error:t.error};if(t.success)return{success:t.success}}}function de(s){let e,t,a,n;const i=s[1].default,r=j(i,s,s[0],null);return a=new le({}),{c(){e=_("main"),r&&r.c(),t=z(),Q(a.$$.fragment)},l(o){e=h(o,"MAIN",{});var u=v(e);r&&r.l(u),t=R(u),W(a.$$.fragment,u),u.forEach(l)},m(o,u){b(o,e,u),r&&r.m(e,null),p(e,t),X(a,e,null),n=!0},p(o,[u]){r&&r.p&&(!n||u&1)&&Y(r,i,o,o[0],n?ee(i,o[0],u,null):Z(o[0]),null)},i(o){n||(M(r,o),M(a.$$.fragment,o),n=!0)},o(o){N(r,o),N(a.$$.fragment,o),n=!1},d(o){o&&l(e),r&&r.d(o),te(a)}}}function _e(s,e,t){let{$$slots:a={},$$scope:n}=e;return se("auth",new ue($)),s.$$set=i=>{"$$scope"in i&&t(0,n=i.$$scope)},[n,a]}class ge extends H{constructor(e){super();O(this,e,_e,de,U,{})}}export{ge as default};
